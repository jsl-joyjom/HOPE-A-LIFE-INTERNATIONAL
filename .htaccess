# Enable Rewrite Engine
RewriteEngine On

# Redirect admin.html to CPHILADMIN (obscured admin path)
RewriteRule ^admin$ CPHILADMIN.html [L]
RewriteRule ^admin/$ CPHILADMIN.html [L]
RewriteRule ^admin\.html$ /CPHILADMIN [R=301,L]

# Remove .html extension from URLs
# If the request is for a file that exists, serve it
RewriteCond %{REQUEST_FILENAME} !-f
RewriteCond %{REQUEST_FILENAME} !-d

# If the request is for a .html file, redirect to clean URL
RewriteCond %{THE_REQUEST} /([^.]+)\.html [NC]
RewriteRule ^ /%1 [NC,L,R=301]

# If the request is for a clean URL, serve the .html file
RewriteCond %{REQUEST_FILENAME}.html -f
RewriteRule ^(.*)$ $1.html [NC,L]

# Special handling for index
RewriteRule ^$ index.html [L]

# Prevent directory listing
Options -Indexes

# Security headers
<IfModule mod_headers.c>
    Header set X-Content-Type-Options "nosniff"
    Header set X-Frame-Options "SAMEORIGIN"
    Header set X-XSS-Protection "1; mode=block"
</IfModule>

